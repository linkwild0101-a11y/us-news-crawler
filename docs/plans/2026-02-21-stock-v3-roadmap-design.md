# US-Monitor 美股机会看板后续规划设计（Stock V3 Roadmap）

- 日期: 2026-02-21
- 目标: 基于 GitHub 同类型项目对比学习，形成 US-Monitor 下一阶段（仅设计层）演进路线
- 范围: 研究与数据层、信号与机会引擎、评估与回测、前端决策体验、治理与运维
- 非范围: 本文不包含具体代码改造与上线执行

---

## 1. 当前基线（US-Monitor 已具备能力）

已完成并可运行：

1. Stock V2 事件/信号/机会并行表（`stock_events_v2` 等）
2. 增量流水线（crawler 触发）+ 全量回填链路
3. LONG/SHORT 双向机会输出 + L1-L4 信号等级
4. 前端 V2 读取与证据页（热点聚类、关系）
5. LLM 并发增强、热点中文化、历史翻译回填工具

核心短板（面向下一阶段）：

- 缺少系统化离线评估与“版本晋级门槛”
- 缺少从机会到组合/回测/复盘的闭环
- 缺少统一数据适配层与健康治理面板
- 缺少可复现实验机制（参数/输入/输出追踪）

---

## 2. 同类项目对比学习（GitHub）

> 数据时间点：2026-02-21（GitHub API 快照）

| 项目 | 代表能力 | 可借鉴点 | 不建议直接照搬 |
|---|---|---|---|
| OpenBB | 金融数据平台化 | 统一 Provider 抽象 + 可插拔数据接入 | 大而全终端生态（超出当前阶段） |
| Qlib | 研究到生产闭环 | 可复现实验流、标准化评估协议 | 全量量化框架迁移成本高 |
| QuantConnect Lean | 事件驱动回测/实盘引擎 | 交易生命周期与风控框架 | 直接引擎替换会破坏现有轻量流程 |
| FinRL | 三层架构与 RL 研究范式 | 分层清晰（数据/环境/策略）与训练评估流程 | 过早 RL 化，易偏离新闻驱动主线 |
| FinGPT | 金融 LLM 专项能力 | LLM 用于解释/归因/语义增强 | 用 LLM 直接主导打分的高波动风险 |
| FinRobot | 多 Agent 研究协作 | 报告自动化、任务分工 | 过度 Agent 化导致复杂度激增 |
| backtesting.py | 轻量回测 | 快速策略验证与可视化评估 | 单框架指标不能覆盖全链路 |
| stocksight | 新闻+情绪经典范式 | 多源情绪融合思路 | 早期架构与现代部署可观测性不足 |

---

## 3. 设计原则（Stock V3）

1. **先评估后扩展**：先建立评估与晋级机制，再扩模型复杂度
2. **规则主引擎 + LLM 辅助层**：LLM 负责解释、翻译、归因、纠偏，不直接替代主评分
3. **可复现优先**：每次分析必须可回放（输入、参数、版本、输出）
4. **面向决策闭环**：从“发现机会”升级到“机会→组合→复盘”
5. **渐进改造**：保持 V2 可运行，增量引入 V3 能力并行验证

---

## 4. Stock V3 目标架构（设计）

四层能力模型：

1. **Data Fabric Layer**
   - 统一接入新闻、宏观、行情、事件源
   - Provider 抽象 + 数据健康状态（可用率/延迟/缺失率）

2. **Research & Feature Layer**
   - 事件规范化（taxonomy + entity + ticker mapping）
   - 可复现实验（run metadata、参数快照、版本标签）

3. **Signal & Opportunity Layer**
   - 多模型并行打分（champion/challenger）
   - 统一机会生命周期（生成/确认/失效/复审）

4. **Decision & UX Layer**
   - 组合约束、Paper Trading、归因报表
   - 前端解释层（指标字典、证据链、操作建议）

---

## 5. 分阶段路线图（仅设计）

## 阶段 A：研究基础设施化（2-3 周）

目标：让每次分析“可追踪、可比较、可回放”。

设计交付：

1. `research_runs` 设计（run_id、窗口、参数、输入快照、版本、耗时、产出摘要）
2. 数据接入统一接口设计（provider registry + failover + source health）
3. 事件本体规范（event_type、side、strength、ttl、evidence schema）
4. 数据健康指标定义（freshness、coverage、null_rate、error_rate）

验收门槛（设计指标）：

- 任一 run 可追溯到完整参数和输入窗口
- 数据健康状态可在单页面观察

---

## 阶段 B：评估与模型治理（3-4 周）

目标：建立“模型是否值得切换”的客观标准。

设计交付：

1. 离线评估协议
   - Hit Rate@1d/3d/5d（LONG/SHORT 分开）
   - Top-K 机会命中率与稳定度
   - 置信度校准曲线（分箱）
2. Champion/Challenger 流程
   - 同窗并行产出、统一评分卡、自动报告模板
3. 漂移监控定义
   - 事件分布漂移、信号密度异常、机会集中度异常

验收门槛：

- 模型切换需满足最低门槛（如连续两周指标优于基线）

---

## 阶段 C：机会到组合闭环（3-4 周）

目标：从“信号列表”升级到“可执行组合决策”。

设计交付：

1. 组合约束规则
   - 单票上限、行业暴露、净敞口、回撤预算
2. Paper Trading 方案
   - 信号触发→建仓规则→退出规则→费用模型→绩效归因
3. 复盘框架
   - 失败机会归因（事件误判/时效衰减/宏观过滤失效）

验收门槛：

- 每周形成组合级归因报告（非仅单信号解释）

---

## 阶段 D：产品化决策体验（2-3 周）

目标：提升“看板到行动”的效率与可解释性。

设计交付：

1. 指标字典中心（已启动 tooltip，扩展为可搜索知识库）
2. Why-Now 证据链页（事件→信号→机会→失效条件）
3. 告警订阅策略（ticker/方向/风险等级）
4. 多角色视图（研究模式/执行模式）

验收门槛：

- 关键决策路径点击深度下降，信息可理解度提升

---

## 6. 关键设计决策（建议锁定）

1. 主评分继续规则/统计驱动，LLM 仅增强层
2. 先做 Paper Trading，不做自动实盘下单
3. 优先美股主线，不扩展多资产类别
4. 所有新增能力需带可观测性与回滚设计

---

## 7. 风险与缓解（设计层）

1. **复杂度失控**
   - 缓解：阶段化交付 + gate 评审，不一次性引入 RL/多 Agent

2. **指标“看起来好”但不可交易**
   - 缓解：加入组合约束与交易成本、滑点假设

3. **LLM 波动影响稳定性**
   - 缓解：固定提示模板、缓存、超时回退、置信度下调机制

4. **数据源可用性波动**
   - 缓解：Provider 冗余、健康打分、降级策略（不阻断主链路）

---

## 8. 成功标准（V3 设计验收口径）

1. 分析结果“可复现率”达到 100%（参数与输入可追溯）
2. 机会评估具备统一评分卡与晋级机制
3. 从机会生成到复盘形成闭环流程
4. 前端关键指标均可解释且可溯源到证据

---

## 9. 下一步（文档后的动作建议）

1. 产出 `阶段A` 详细实施清单（表结构、接口契约、健康指标）
2. 产出统一评估协议文档（阶段B）
3. 定义 V3 与 V2 的并行观测窗口与切换准则

---

## 10. 参考项目

- https://github.com/OpenBB-finance/OpenBB
- https://github.com/microsoft/qlib
- https://github.com/QuantConnect/Lean
- https://github.com/AI4Finance-Foundation/FinRL
- https://github.com/AI4Finance-Foundation/FinGPT
- https://github.com/AI4Finance-Foundation/FinRobot
- https://github.com/kernc/backtesting.py
- https://github.com/shirosaidev/stocksight
